{{outlet}}
<div id="home-container"></div>

<a class="btn-floating btn-large waves-effect waves-light" {{action 'openModal'}}>
    <i class="material-icons">playlist_add</i>
</a>


{{#if isModalOpen}}
    {{#modal-dialog translucentOverlay=true container-class='modal modal-fixed-footer'}}
        {{#if step1}}
            <form {{action 'step2' on="submit"}}>
                <div class="modal-content">
                    <div class="modal-title teal lighten-3 white-text">Step 1: Search for an event by title</div>
                    <div class="modal-body input-field">
                        <i class="material-icons input-search">search</i>
                        {{input value=search type="search" required=true}}
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="modal-action modal-close waves-effect waves-green btn-flat" type="submit">
                        Next
                    </button>
                    <a class="modal-action modal-close waves-effect waves-red btn-flat" {{action 'closeModal'}}>
                        Cancel
                    </a>
                </div>
            </form>
        {{/if}}

        {{#if step2}}
            <div class="modal-content">
                <div class="modal-title teal lighten-3 white-text">Step 2: Select an event</div>
                <div class="modal-body">
                    {{#if eventResults}}
                        <ul class="collection">
                            {{#each eventResults as |event|}}
                                <li class='collection-item avatar {{if event.selected 'active'}}' {{action 'selectEvent' event}}>
                                    <span class="title">{{event.title}}</span>
                                    <p>{{event.readableDate}}<br>{{event.location}}</p>
                                </li>
                            {{/each}}
                        </ul>
                    {{else}}
                        <div class="progress">
                            <div class="indeterminate"></div>
                        </div>
                        If you've been waiting for a while, try being more specific with your search!
                    {{/if}}
                </div>
            </div>
            <div class="modal-footer">
                <a class="modal-action modal-close waves-effect waves-green btn-flat" {{action 'step3'}}>
                    Next
                </a>
                <a class="modal-action modal-close waves-effect waves-blue btn-flat" {{action 'step1'}}>
                    Back
                </a>
                <a class="modal-action modal-close waves-effect waves-red btn-flat" {{action 'closeModal'}}>
                    Cancel
                </a>
            </div>
        {{/if}}

        {{#if step3}}
            <div class="modal-content">
                <div class="modal-title teal lighten-3 white-text">Step 3: Select the artists</div>
                    <div class="modal-body">
                        {{#if artistResults}}
                            <div class="row">
                                {{#each artistResults as |artist|}}
                                    <p class="col s6">
                                        {{input type="checkbox" id=artist.name checked=artist.checked}}
                                        <label for="{{artist.name}}">{{artist.name}} {{artist.genre}}</label>
                                    </p>
                                {{/each}}
                            </div>
                        {{else}}
                            <div class="progress">
                                <div class="indeterminate"></div>
                            </div>
                        {{/if}}
                    </div>
            </div>
            <div class="modal-footer">
                <a class="modal-action modal-close waves-effect waves-green btn-flat" {{action 'step4'}}>
                    Next
                </a>
                <a class="modal-action modal-close waves-effect waves-blue btn-flat" {{action 'step2'}}>
                    Back
                </a>
                <a class="modal-action modal-close waves-effect waves-red btn-flat" {{action 'closeModal'}}>
                    Cancel
                </a>
            </div>
        {{/if}}

        {{#if step4}}
            <form {{action 'createPlaylist' on="submit"}}>
                <div class="modal-content">
                    <div class="modal-title teal lighten-3 white-text">Step 4: Settings</div>
                    <div class="modal-body">
                        <h6>Playlist title:</h6>
                        {{input value=playlistTitle validate=true required=true}}
                        <h6>Number of songs per artist: {{range}}</h6>
                        <p class="range-field">
                            {{input value=range type="range" min="1" max="10" }}
                        </p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="modal-action modal-close waves-effect waves-green btn-flat" type="submit">
                        Create Playlist
                    </button>
                    <a class="modal-action modal-close waves-effect waves-blue btn-flat" {{action 'step3'}}>
                        Back
                    </a>
                    <a class="modal-action modal-close waves-effect waves-red btn-flat" {{action 'closeModal'}}>
                        Cancel
                    </a>
                </div>
            </form>
        {{/if}}

        {{#if creating}}
            <div class="modal-content">
                <div class="modal-title teal lighten-3 white-text">{{progress}}</div>
                <div class="modal-body">
                    {{#if complete}}
                        <h5>You can view your playlist on our home page or in your Spotify account!</h5><br>
                    {{else}}
                        <div class="progress">
                            <div class="indeterminate"></div>
                        </div>
                    {{/if}}
                    {{#each errorMessages as |error|}}
                        {{error}}<br>
                    {{/each}}
                </div>
            </div>
            <div class="modal-footer">
                {{#if complete}}
                    <a class="modal-action modal-close waves-effect waves-red btn-flat" {{action 'closeModal'}}>
                        Close
                    </a>
                {{/if}}
            </div>
        {{/if}}
    {{/modal-dialog}}
{{/if}}

<!--
{{#if isModalOpen}}



        {{#if step4}}
            <form {{action 'createPlaylist' on="submit"}}>
                <div class="modal-content">
                    <div class=modal-title teal lighten-3 white-text>Step 4: Settings</div>
                    Playlist title:
                    {{md-input class="col s12 input-adjust" value=playlistTitle validate=true required=true}}
                    Number of songs per artist: {{range}}
                    <p class="range-field">
                        {{input value=range type="range" min="1" max="10" }}
                    </p>
                </div>
                <div class="modal-footer">
                    <button class="modal-action modal-close waves-effect waves-green btn-flat" type="submit">
                        Create Playlist
                    </button>
                    <a class="modal-action modal-close waves-effect waves-blue btn-flat" {{action 'step3'}}>
                        Back
                    </a>
                    <a class="modal-action modal-close waves-effect waves-red btn-flat" {{action 'closeModal'}}>
                        Cancel
                    </a>
                </div>
            </form>
        {{/if}}

        {{#if creating}}
            <div class="modal-content">
                <div class=modal-title teal lighten-3 white-text>{{progress}}</div>
                {{#if complete}}
                    <b>You can view your playlist on our home page or in your Spotify account!</b><br>
                {{else}}
                    {{md-loader}}
                {{/if}}
                {{#each errorMessages as |error|}}
                    {{error}}<br>
                {{/each}}
                {{#if complete}}
                    <div class="modal-footer">
                        <a class="modal-action modal-close waves-effect waves-red btn-flat" {{action 'closeModal'}}>
                            Close
                        </a>
                    </div>
                {{/if}}
            </div>
        {{/if}}
{{/if}}
-->